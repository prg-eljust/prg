
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Abdó Garcia, Paco Galera i Joan Gerard Camarena">
      
      
        <link rel="canonical" href="https://prg-eljust.github.io/prg/PRG10/">
      
      
        <link rel="prev" href="../PRG09/">
      
      
        <link rel="next" href="../PRG11/">
      
      
      <link rel="icon" href="../img/logojaume.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>UD10. Interfícies - Programació 1DAM/DAWsp Curs 2025-2026</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-GJ8MB56SLW"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-GJ8MB56SLW",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-GJ8MB56SLW",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="UD10. Interfícies - Programació 1DAM/DAWsp Curs 2025-2026" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://prg-eljust.github.io/prg/assets/images/social/PRG10.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://prg-eljust.github.io/prg/PRG10/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="UD10. Interfícies - Programació 1DAM/DAWsp Curs 2025-2026" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://prg-eljust.github.io/prg/assets/images/social/PRG10.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-introduccio-a-les-interficies" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href=".." title="Programació 1DAM/DAWsp Curs 2025-2026" class="md-header__button md-logo" aria-label="Programació 1DAM/DAWsp Curs 2025-2026" data-md-component="logo">
      
  <img src="../img/logojaume.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Programació 1DAM/DAWsp Curs 2025-2026
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UD10. Interfícies
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="indigo"  aria-label="Mode oscur"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Mode oscur" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Mode clar"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Mode clar" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Programació 1DAM/DAWsp Curs 2025-2026" class="md-nav__button md-logo" aria-label="Programació 1DAM/DAWsp Curs 2025-2026" data-md-component="logo">
      
  <img src="../img/logojaume.png" alt="logo">

    </a>
    Programació 1DAM/DAWsp Curs 2025-2026
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD1. Dades simples. Instruccions seqüencials
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD2. Programació estructurada. Disseny d'algorismes en Python
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD3. Introducció a Python
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD4. Estructures de control en Python
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD5. Introducció a Java
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD6. Arrays en Java
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD7. Programació modular. Funcions en Java
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD8. Programació Orientada a Objectes. Classes amb atributs.
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD9. Programació Orientada a Objectes. Classes amb mètodes
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    UD10. Interfícies
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    UD10. Interfícies
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduccio-a-les-interficies" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introducció a les interfícies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-concepte-dinterficie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Concepte d'interfície
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Concepte d&#39;interfície">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-metodes-per-defecte-en-interficies" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Mètodes per defecte en interfícies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-diferencies-entre-interficies-i-classes" class="md-nav__link">
    <span class="md-ellipsis">
      3. Diferències entre interfícies i classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Diferències entre interfícies i classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-interficies-vs-classes" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Interfícies vs classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-interficies-vs-classes-abstractes" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Interfícies VS classes abstractes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-les-interficies-comparable-i-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4. Les interfícies Comparable i Comparator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Les interfícies Comparable i Comparator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-introduccio" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Introducció
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-la-interficie-comparable" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. La interfície Comparable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-la-interficie-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. La interfície Comparator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-ordenant-una-llista-a-la-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Ordenant una llista a la inversa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-esquema-resum-dus-de-les-interficies-comparable-i-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4.5. Esquema resum d'ús de les interfícies Comparable i Comparator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-la-interficie-cloneable" class="md-nav__link">
    <span class="md-ellipsis">
      5. La interfície Cloneable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. La interfície Cloneable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-formes-de-copiar-objectes" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Formes de copiar objectes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1. Formes de copiar objectes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-copia-amb-loperador" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.1. Còpia amb l'operador =
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-copia-superficial-shallow-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2. Còpia superficial (shallow copy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-copia-profunda-deep-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.3. Còpia profunda (deep copy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-formes-de-fer-la-copia-superficial-shallow-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Formes de fer la còpia superficial (shallow copy)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.2. Formes de fer la còpia superficial (shallow copy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#521-clonant-amb-un-constructor" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.1. Clonant amb un constructor:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#522-clonant-amb-un-metode-que-retorne-un-objecte-clonat" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.2. Clonant amb un mètode que retorne un objecte clonat:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#523-invocant-el-clone-de-la-classe-object-i-implementant-la-interficie-cloneable" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.3. Invocant el clone() de la classe Object (i implementant la interfície Cloneable)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-formes-de-fer-la-copia-profunda-deep-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Formes de fer la còpia profunda (deep copy)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3. Formes de fer la còpia profunda (deep copy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-deep-copy-manual" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.1. Deep copy "manual"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-deep-copy-automatic" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.2. Deep copy "automàtic"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-les-interficies-iterator-i-iterable" class="md-nav__link">
    <span class="md-ellipsis">
      6. Les interfícies Iterator i Iterable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Les interfícies Iterator i Iterable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-introduccio" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Introducció
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-la-interficie-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      6.2. La interfície Iterator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-la-interficie-iterable" class="md-nav__link">
    <span class="md-ellipsis">
      6.3. La interfície Iterable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD11. Fitxers
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRG12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD12. Bases de Dades
    
      <br>
      <small>1DAM - PRG</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pràctiques
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Pràctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activitats/scrabble/Scrabble/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scrabble
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activitats/pescamines/Pescamines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Joc del pescamines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activitats/agenda/agenda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agenda de qualificacions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduccio-a-les-interficies" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introducció a les interfícies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-concepte-dinterficie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Concepte d'interfície
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Concepte d&#39;interfície">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-metodes-per-defecte-en-interficies" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Mètodes per defecte en interfícies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-diferencies-entre-interficies-i-classes" class="md-nav__link">
    <span class="md-ellipsis">
      3. Diferències entre interfícies i classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Diferències entre interfícies i classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-interficies-vs-classes" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Interfícies vs classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-interficies-vs-classes-abstractes" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Interfícies VS classes abstractes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-les-interficies-comparable-i-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4. Les interfícies Comparable i Comparator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Les interfícies Comparable i Comparator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-introduccio" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Introducció
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-la-interficie-comparable" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. La interfície Comparable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-la-interficie-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. La interfície Comparator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-ordenant-una-llista-a-la-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Ordenant una llista a la inversa
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-esquema-resum-dus-de-les-interficies-comparable-i-comparator" class="md-nav__link">
    <span class="md-ellipsis">
      4.5. Esquema resum d'ús de les interfícies Comparable i Comparator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-la-interficie-cloneable" class="md-nav__link">
    <span class="md-ellipsis">
      5. La interfície Cloneable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. La interfície Cloneable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-formes-de-copiar-objectes" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Formes de copiar objectes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1. Formes de copiar objectes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-copia-amb-loperador" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.1. Còpia amb l'operador =
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-copia-superficial-shallow-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2. Còpia superficial (shallow copy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-copia-profunda-deep-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.3. Còpia profunda (deep copy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-formes-de-fer-la-copia-superficial-shallow-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Formes de fer la còpia superficial (shallow copy)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.2. Formes de fer la còpia superficial (shallow copy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#521-clonant-amb-un-constructor" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.1. Clonant amb un constructor:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#522-clonant-amb-un-metode-que-retorne-un-objecte-clonat" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.2. Clonant amb un mètode que retorne un objecte clonat:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#523-invocant-el-clone-de-la-classe-object-i-implementant-la-interficie-cloneable" class="md-nav__link">
    <span class="md-ellipsis">
      5.2.3. Invocant el clone() de la classe Object (i implementant la interfície Cloneable)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-formes-de-fer-la-copia-profunda-deep-copy" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Formes de fer la còpia profunda (deep copy)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3. Formes de fer la còpia profunda (deep copy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-deep-copy-manual" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.1. Deep copy "manual"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-deep-copy-automatic" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.2. Deep copy "automàtic"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-les-interficies-iterator-i-iterable" class="md-nav__link">
    <span class="md-ellipsis">
      6. Les interfícies Iterator i Iterable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Les interfícies Iterator i Iterable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-introduccio" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Introducció
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-la-interficie-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      6.2. La interfície Iterator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-la-interficie-iterable" class="md-nav__link">
    <span class="md-ellipsis">
      6.3. La interfície Iterable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>UD10. Interfícies</h1>

<h2 id="1-introduccio-a-les-interficies">1. Introducció a les interfícies</h2>
<p>En un videojoc de <em>marcianets</em> hi ha molts personatges (objectes) per la pantalla.</p>
<p>Tots seran de la classe <em>Personatge</em>, però són de tipus (subclasses) diferents.</p>
<p><img alt="Esquema personatges" class="center" src="../img/ud10/persenatges.png" width="66%" /></p>
<p>Però ara volem completar-ho fent que algunes de les classes tinguen un <strong>comportament en comú</strong>.</p>
<ul>
<li>
<p>Per exemple, si volem que la classe <em>Nau</em> i la classe <em>Au</em> puguen volar, voldrem que les dos implementen <strong>tots</strong> els mètodes que ha de tindre un personatges <em>"volador"</em>: <em>pujar i baixar</em>.</p>
</li>
<li>
<p>O bé, si volem que les classes <em>Nau</em>, <em>Humà</em> i <em>Alien</em> puguen usar armes, voldrem que les tres implementen <strong>tots</strong> els mètodes que ha de tindre un personatge <em>"disparador"</em>: <em>disparar</em> i <em>defendre</em>.</p>
</li>
</ul>
<p>Podríem pensar en fer una classe <em>Volador</em> amb eixos mètodes però sense implementar-los (serien abstractes) sinó que els implementarien les classes filles. Igualment faríem una classe <em>Disparador</em>. Però en Java una classe només pot ser filla d'1 sola classe. Per a això estan les interfícies.</p>
<p>Podríem dir que una <strong>interfície</strong> és un "conjunt d'operacions que sabem <strong>què</strong> han de fer però nom <strong>com</strong>". Eixe <strong>com</strong> estarà definit en cada classe que vullga tindre eixe comportament. És a dir, en cada classe que implemente eixa interfície.</p>
<p><img alt="Interfície amb personatges" class="center" src="../img/ud10/interficiePersonatge.png" width="75%" /></p>
<p>Veiem que caldrà una <strong>interfície Volador</strong> (i altra <strong>Disparador</strong>), on posarem els mètodes que hauran d'implementar les classes "voladores" (i "disparadores", respectivament). Així com els noms de les classes solen ser substantius (<em>Cotxe</em>, <em>Alumne</em>, <em>Alien</em>...), els noms de les interfícies solen ser adjectius, ja que descriuen el seu comportament (<em>Volador</em>, <em>Disparador</em>, <em>Comparable</em>...).</p>
<p>Els mètodes de les interfícies estaran "buits": només tindran la capçalera dels mètodes, però no estaran implementades. És a dir, seran mètodes abstractes, encara que no es posa la paraula <em>abstract</em>.</p>
<p>Veiem com es creen les interfícies:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Disparador</span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">disparar</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">defendre</span><span class="p">();</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>Els mètodes no s'implementen en la interfície</strong>, sinó que que els haurà  d'implementar cada classe que vullga implementar la interfície <em>Volador</em>. Encara que no es pose, els mètodes són <em>public abstract</em>. El nom de les interfícies convé que tinguen majúscula inicial (igual que les classes).</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Volador</span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">alturaMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujar</span><span class="p">();</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixar</span><span class="p">();</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>En una interfície també es poden definir <strong>constants</strong> (sempre seran <em>public static final</em>, encara que no es posa).</li>
</ol>
<p>I veiem ara com una classe implementa eixes interfícies:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Nau</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Personatge</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Volador</span><span class="p">,</span><span class="w"> </span><span class="n">Disparador</span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">velocitat</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="c1">// Implementació dels mètodes de Volador</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujar</span><span class="p">(){</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Volador</span><span class="p">.</span><span class="na">alturaMax</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Volador</span><span class="p">.</span><span class="na">alturaMax</span><span class="p">;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixar</span><span class="p">(){</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">posY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">velocitat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">    </span><span class="c1">// Implementació dels mètodes de Disparador</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">disparar</span><span class="p">(){</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Pinyou, pinyou!&quot;</span><span class="p">);</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">defendre</span><span class="p">(){</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Augh!&quot;</span><span class="p">);</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>La classe <em>Nau</em> és filla de <em>Personatge</em>. Però també implementa les interfícies <em>Volador</em> i <em>Disparador</em>. Per tant, haurà d'implementar tots els mètodes de les interfícies. Si no ho fem, donarà error de compilació.</li>
</ol>
<p>En el <em>main</em> també podem definir objectes "voladors" o "disparadors" però hauran de ser instanciats a una classe, mai a una interfície.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">        </span><span class="c1">// Objecte de la classe Nau</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">        </span><span class="n">Nau</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Nau</span><span class="p">();</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">        </span><span class="n">Volador</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Nau</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">        </span><span class="n">Volador</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Au</span><span class="p">();</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">        </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Volador</span><span class="o">&gt;</span><span class="w"> </span><span class="n">llistaVoladors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">        </span><span class="n">llistaVoladors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">v1</span><span class="p">);</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">        </span><span class="n">llistaVoladors</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">v2</span><span class="p">);</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Puc definir un objecte a partir d'una interfície, però l'he d'instanciar a partir d'una classe. Igual que en les classes abstractes.</li>
<li>D'igual forma puc fer una llista de "voladors", on podré posar tant objectes <em>Nau</em> com <em>Au</em>.</li>
</ol>
<h2 id="2-concepte-dinterficie">2. Concepte d'interfície</h2>
<p>Una interfície és una col·lecció de mètodes abstractes (i atributs constants). Les classes que implementen una interfície hauran de donar cos als mètodes de la interfície.</p>
<p>Recordem que una classe només pot ser filla (<em>extends</em>) d'<strong>una</strong> sola classe, però pot implementar <strong>moltes</strong> interfícies:</p>
<pre class="mermaid"><code>classDiagram
    Classe &lt;|-- SubClasse : extends
    Interfície1 &lt;|.. SubClasse : implements
    Interfície2 &lt;|.. SubClasse : implements</code></pre>
<p>A més, una interfície pot ser filla (<em>extends</em>) de moltes interfícies:</p>
<pre class="mermaid"><code>classDiagram
    Interfície1 &lt;|.. Interfície3 : extends
    Interfície2 &lt;|.. Interfície3 : extends</code></pre>
<div class="admonition info">
<p class="admonition-title">Utilitat de les interfícies</p>
<ul>
<li>Simular herència múltiple (una classe pot ser filla d'una sola classe, però pot implementar moltes interfícies).</li>
<li>Obligar a que certes classes utilitzen els mateixos mètodes (per exemple, per a poder ser comparades entre elles) sense estar obligades a tindre una relació d'herència.</li>
<li>Sabent que una classe implementa una determinada interfície, podrem usar els seus mètodes perquè ja sabrem què fan (ens dóna igual com estiguen implementats).</li>
<li>Definir un conjunt de constants disponibles per a totes les classes que implementen la interfície (per exemple, per a definir constants d'estat d'un objecte).</li>
</ul>
</div>
<h3 id="21-metodes-per-defecte-en-interficies">2.1. Mètodes per defecte en interfícies</h3>
<p>A partir de Java 8 podem posar cos als mètodes en la pròpia interfície.</p>
<p>En eixos casos caldrà indicar, amb <em>default</em>, que eixa és la implementació per defecte per a aquelles classes que implementen la interfície i que no donen cos a eixos mètodes.</p>
<div class="admonition example">
<p class="admonition-title">Exemple d'interfície amb mètodes per defecte</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Disparador</label><label for="__tabbed_1_2">Nau</label><label for="__tabbed_1_3">Alien</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Disparador</span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">disparar</span><span class="p">(){</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Bang bang&quot;</span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">defendre</span><span class="p">();</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Les classes que implementen la interfície <em>Disparador</em> no estaran obligades a implementar el mètode <em>disparar()</em> (ja que té una implementació per defecte).</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Nau</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Disparador</span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">disparar</span><span class="p">(){</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Pinyou, pinyou!&quot;</span><span class="p">);</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">defendre</span><span class="p">(){</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Augh!&quot;</span><span class="p">);</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>La classe <em>Nau</em> implementa els 2 mètodes de la interfície, però no és obligatori. Podria no implementar el mètode <em>disparar()</em> i utilitzar el que té per defecte en la interfície.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alien</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Disparador</span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">defendre</span><span class="p">(){</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Augh!&quot;</span><span class="p">);</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>La classe <em>Alien</em> no implementa el mètode <em>disparar()</em>, per tant, utilitzarà el que té per defecte en la interfície.</li>
</ol>
</div>
</div>
</div>
</div>
<h2 id="3-diferencies-entre-interficies-i-classes">3. Diferències entre interfícies i classes</h2>
<h3 id="31-interficies-vs-classes">3.1. Interfícies vs classes</h3>
<p><img alt="Interfícies vs Classes" class="center" src="../img/ud10/interfVSclasses.png" /></p>
<h3 id="32-interficies-vs-classes-abstractes">3.2. Interfícies VS classes abstractes</h3>
<p><img alt="Interfícies vs Classes abstractes" class="center" src="../img/ud10/interfVSclassesAbs.png" /></p>
<details class="question">
<summary>Exercici 1. Interfícies</summary>
<p>Crea el projecte <strong><em>ProvesInterficies</em></strong>. L'objectiu d'este exercici és poder fer càlculs estadístics (mínim, màxim i suma) de llistes de números, independentment de com estiguen implementades eixes llistes.</p>
<ul>
<li>
<p>Crea esta interfície:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Estadistiques</span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="nf">minim</span><span class="p">();</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="nf">maxim</span><span class="p">();</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="nf">suma</span><span class="p">();</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Crea la classe <strong><em>ArrayListEstad</em></strong> que tinga un ArrayList de <em>doubles</em> (nomenat <em>numeros</em>) i que implemente la interfície <em>Estadistiques</em>. <strong>NOTA</strong>: quan escrigues l'<em>implements</em>, voràs que dona error. És degut a que encara no has implementat els mètodes de la interfície. Implementa'ls.</p>
</li>
<li>
<p>Crea la classe <strong><em>ArrayEstad</em></strong>, amb un array (un vector, no ArrayList) de doubles (anomenat <em>numeros</em>), que implemente la interfície <em>Estadistiques</em>. <strong>NOTA</strong>: Quan poses l'<em>implements</em>, clica en la icona de l'error i fes que l'IDE t'implemente els mètodes de la interfície. Després posa el cos dels mètodes.</p>
</li>
<li>
<p>En el <em>main</em> defineix un objecte de cadascuna de les classes anteriors, afegeix valors a les seues llistes i usa els mètodes de la interfície per a mostrar els respectius mínims, màxims i sumes dels seus elements.</p>
</li>
</ul>
</details>
<details class="question">
<summary>Exercici 2</summary>
<p>Si volem que els objectes d’una classe es puguen comparar, eixa classe hauria de definir els mètodes <em>esMajor</em>, <em>esMenor</em> i <em>esIgual</em>. En compte d’implementar-los en eixa classe, l’objectiu és definir-los en una interfície i fer que cada classe que necessite poder comparar els seus objectes implemente eixa interfície.</p>
<ul>
<li>En el projecte <em>provesInterficies</em> construeix la interfície <strong><em>EsComparable</em></strong> amb els mètodes <strong><em>esMajor</em></strong>, <strong><em>esMenor</em></strong> i <strong><em>esIgual</em></strong>, als quals se’ls passa com a paràmetre un objecte i retornaran un <strong>booleà</strong> (<em>true</em> si this és major/menor/igual que l’objecte del paràmetre). Com sabràs, en la interfície no s’implementen, sinó que només es posa la capçalera dels mètodes. Posa també un comentari en <a href="https://www.oracle.com/es/technical-resources/articles/java/javadoc-tool.html">Javadoc</a> de què fa cada mètode.</li>
<li>Crea la classe <strong><em>Cotxe</em></strong> (amb matrícula i preu) i que implemente la interfície <em>EsComparable</em>. Un cotxe serà menor que un altre si el preu és menor.</li>
<li>En el <em>main</em> mostra el més gran de 2 cotxes qualsevol.</li>
</ul>
</details>
<h2 id="4-les-interficies-comparable-i-comparator">4. Les interfícies <em>Comparable</em> i <em>Comparator</em></h2>
<h3 id="41-introduccio">4.1. Introducció</h3>
<p>Per a ordenar un un array d'enters, podem usar el mètode <em>sort</em> de la classe <em>Arrays</em> (caldrà importar <em>java.util.Arrays</em>):</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">edats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="mi">34</span><span class="p">};</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">edats</span><span class="p">);</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">edats</span><span class="p">){</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">);</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Si el que volem és ordenar un <em>ArrayList</em> d'enters podem usar el mètode <em>sort</em> de la classe <em>Collections</em> (caldrà importar <em>java.util.Collections</em>):</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span>
<span class="normal"><a href="#__codelineno-9-7">7</a></span>
<span class="normal"><a href="#__codelineno-9-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">edats2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">edats2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">23</span><span class="p">);</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="n">edats2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">45</span><span class="p">);</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="n">edats2</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">...</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">edats2</span><span class="p">);</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">edats2</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>D'igual forma podríem ordenar una llista (<em>array</em>, <em>ArrayList...</em>) de <em>String</em>, de <em>float</em>, etc. Però què passa si volem ordenar una llista d'elements que no són directament ordenables (comparables), com pot ser una llista de cotxes, alumnes...? Si li aplicàrem el mètode <em>sort</em>, ens donaria error, ja que la màquina virtual "no sap" com comparar eixos objectes.</p>
<p>Per a fer que els objectes d'una classe puguen ser comparats, hem d'indicar un criteri de comparació. És a dir, cal definir quan un objecte de la classe que volem és menor que un altre, quan és major i quan és igual. La interfície <em>EsComparable</em> que hem fet en l'exercici de l'apartat anterior no calia perquè <strong>Java ja té unes interfícies semblants</strong>, que són les que cal usar, ja que el <em>sort</em> (entre altres) usa els mètodes d'eixes interfícies.</p>
<p>Si volem establir un únic criteri d'ordenació, usarem la <strong>interfície <em>Comparable</em></strong> però si volem establir diferents criteris d'ordenació usarem la <strong>interfície <em>Comparator</em></strong>.</p>
<h3 id="42-la-interficie-comparable">4.2. La interfície <em>Comparable</em></h3>
<p>L'han d'implementar les classes que vulguen establir un criteri de comparació dels seus objectes (i només un). Esta classe no té mètodes com <em>esMajor</em>, <em>esMenor</em>, <em>esIgual</em>, sinó que l'únic mètode que cal implementar és el mètode <em>compareTo</em>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">compareTo</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>No hem de crear la interfície, ja que ja està inclosa en Java. Vorem que la &lt; T &gt; indica que podrem usar el que s'anomen <strong><em>tipus genèrics</em></strong>.</li>
</ol>
<p>Este mètode haurà de retornar un <strong>número negatiu</strong> si <em>this</em> és menor que <em>obj</em>, un <strong>número positiu</strong> si <em>this</em> és major que <em>obj</em> i <strong>0</strong> si són iguals. Per tant, el mètode ha de retornar un enter. Ens servirà per a comparar dos objectes pel criteri que volem.</p>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<p>Suposem que volem comparar (o ordenar) alumnes. Si volem que l'ordre natural dels alumnes és per la seua edat, farem:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparable</span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">codi</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">edat</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">curs</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compareTo</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="p">){</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">((</span><span class="n">Alumne</span><span class="p">)</span><span class="n">obj</span><span class="p">).</span><span class="na">edat</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">((</span><span class="n">Alumne</span><span class="p">)</span><span class="n">obj</span><span class="p">).</span><span class="na">edat</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>O bé, per a no fer el càsting en el <em>compareTo</em>, podem implementar la interfície <em>Comparable</em> indicant que el seu tipus genèric serà <em><Alumne></em>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">codi</span><span class="p">;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">edat</span><span class="p">;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">curs</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compareTo</span><span class="p">(</span><span class="n">Alumne</span><span class="w"> </span><span class="n">alu</span><span class="p">){</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">alu</span><span class="p">.</span><span class="na">edat</span><span class="p">;</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>Un truquet</strong>: si el criteri per a comparar és un enter (<em>edat</em> en este cas), el número que retorna <em>compareTo</em> es pot calcular com eixa resta, ja que estarem retornant un número negatiu si <em>this &lt; alu</em>, un número positiu si <em>this &gt; alu</em> i 0 si són iguals. A banda, podem veure com ara ja no cal fer el càsting, ja que el paràmetre del mètode <em>compareTo</em> és de tipus <em>Alumne</em>.</li>
</ol>
<p>Ara podrem comparar dos objectes de la classe <em>Alumne</em>:</p>
<p><code class="center">if (alu1.compareTo(alu2) &lt; 0) System.out.println("L'alumne 1 és menor que l'alumne 2");</code></p>
<p>O bé, ordenar una llista d'alumnes (<em>array</em> o <em>ArrayList</em>) amb el <strong><em>sort</em></strong>, com abans:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="w"> </span><span class="n">llistaAlumnes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="n">Alumne</span><span class="o">[]</span><span class="w"> </span><span class="n">vectorAlumnes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="o">[</span><span class="mi">10</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">...</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">llistaAlumnes</span><span class="p">);</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">Arrays</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">vectorAlumnes</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Ara el <em>sort</em> (tan de <em>Collections</em> com d'<em>Arrays</em>) sí que saben com ordenar alumnes, ja que la classe <em>Alumne</em> implementa la interfície <em>Comparable</em>.</li>
</ol>
</div>
<p>És un altre motiu de l'ús d'interfícies: mitjançant la implementació d'interfícies tots els programadors fan servir el mateix nom de mètode (<em>compareTo, sort...</em>) per a fer una mateixa acció (com comparar objectes).</p>
<p>Imagina't que estàs treballant en un equip de programadors i has d'utilitzar una classe que ha codificat un altre programador. Si vols comparar dos objectes d'eixa classe, només veient que implementa la interfície <em>Comparable</em>, ja saps quins mètodes pots usar sense saber com està implementat.</p>
<p>Això facilita el desenvolupament de programes i ajuda a comprendre'ls, sobretot quan intervenen centenars de classe diferents.</p>
<details class="question">
<summary>Exercici 3. Interfície Comparable</summary>
<p>Abans has creat la interfície <em>EsComparable</em> amb 3 mètodes però, com acabem de vore, ja existeix una interfície pareguda a l'API de Java: <em>Comparable</em>.</p>
<ul>
<li>Fes que la classe <em>Cotxe</em> implemente la interfície <em>Comparable</em>. Implementa el mètode <em>compareTo</em> fent que un <em>Cotxe</em> siga més xicotet que altre si la matrícula és menor alfabèticament (caldrà criar al <em>compareTo</em> de la classe <em>String</em>).En cas d'igualtat, serà més xicotet el de menor preu.</li>
<li>Modificia els mètodes de <em>Cotxe</em> que implementen la interfície <em>EsComparable</em> per a que ara es basen en invocacions al mètode <em>compareTo</em>.</li>
</ul>
</details>
<details class="question">
<summary>Exercici 4</summary>
<p>En el <em>main</em> mostra una llista de cotxes. Per a això, crea el <em>toString</em> de <em>Cotxe</em>, i així serà suficient amb <em>System.out.println(llistaCotxes)</em>. Ordena la llista i torna-la a mostrar. Comprova que s'ha ordenat bé.</p>
</details>
<h3 id="43-la-interficie-comparator">4.3. La interfície <em>Comparator</em></h3>
<p>Amb la interfície <em>Comparable</em> podíem comparar (ordenar) alumnes per un criteri establert: el codi de l'alumne. Però de vegades, en un mateix programa, voldrem establir diferents criteris  d'ordenació: ara pel nom, ara pel curs...</p>
<p>Per a fer que els objectes d'una classe puguen ser comparats per diversos criteris, per cada criteri caldrà crear una classe especial que implemente una interfície anomenada <em>Comparator</em>, on definirem el mètode <strong><em>compare</em></strong> (no <em>compareTo</em>), al qual se li passen com a paràmetre els <strong>dos objectes</strong> a comparar i retornarà un valor <strong>negatiu</strong>, <strong>zero</strong> o <strong>positiu</strong>, <strong>igual que el <em>compareTo</em></strong> de la interfície <em>Comparable</em>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">interface</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">obj1</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">obj2</span><span class="p">);</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>No l'hem de crear ja que és una interfície inclosa en Java.</li>
</ol>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<p>Volem establir 3 criteris d'ordenació. Per tant, farem 3 comparadors. És a dir, 3 classes que implementen <em>Comparator</em> per a implementar 3 voltes el <em>compare</em>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span>
<span class="normal"><a href="#__codelineno-15-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Comparator</span><span class="p">;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ComparadorAlumnePerEdat</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="p">){</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">getEdat</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a2</span><span class="p">.</span><span class="na">getEdat</span><span class="p">();</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span>
<span class="normal"><a href="#__codelineno-16-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Comparator</span><span class="p">;</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ComparadorAlumnePerNom</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="p">){</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">getNom</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="na">getNom</span><span class="p">());</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Podem comparar cadenes amb el <em>compareTo</em> de la classe <em>String</em> (ja que <em>String</em> implementa <em>Comparable</em>).</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span>
<span class="normal"><a href="#__codelineno-17-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Comparator</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ComparadorAlumnePerCursEdat</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="p">){</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">cmpCurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">getCurs</span><span class="p">().</span><span class="na">compareTo</span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="na">getCurs</span><span class="p">());</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">cmpCurs</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">cmpCurs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">getEdat</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a2</span><span class="p">.</span><span class="na">getEdat</span><span class="p">());</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Ordenarà alumnes segons el curs. Si foren del mateix els ordenaria per l'edat.</li>
</ol>
<p>Ara, si tenim dos objectes <em>alu1</em> i <em>alu2</em>, de la classe <em>Alumne</em>, podem comparar-los pel criteri que vullgam. Ho farem creant un objecte de la classe que té el criteri que volem. Així:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">ComparadorAlumnePerCursEdat</span><span class="w"> </span><span class="n">cace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ComparadorAlumnePerCursEdat</span><span class="p">();</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="k">if</span><span class="p">(</span><span class="n">cace</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">alu1</span><span class="p">,</span><span class="w"> </span><span class="n">alu2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">alu1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; és menor que &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">alu2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; segons curs i edat.&quot;</span><span class="p">);</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>O bé, podrem ordenar una llista d'alumnes (<em>array</em>, <em>ArrayList...</em>) amb el criteri que vullgam, també amb el <em>sort</em>, però passant-li com a segon paràmetre un comparador. És a dir: un objecte de la classe que té el criteri que volem:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="p">...</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">llistaAlumnes</span><span class="p">,</span><span class="w"> </span><span class="n">cace</span><span class="p">);</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">llistaAlumnes</span><span class="p">);</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="p">...</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Si al <em>sort</em> només li passem la llista, l'ordena pel criteri per defecte (usa el <em>compareTo()</em> de la classe <em>Alumne</em>). Però si li passem també un comparador, ho ordena per eixe criteri (usa el <em>compare()</em> del comparador). En este cas, per curs i edat.</li>
</ol>
</div>
<h3 id="44-ordenant-una-llista-a-la-inversa">4.4. Ordenant una llista a la inversa</h3>
<p>Podem ordenar una llista en sentit invers a l'actual:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">Collections</span><span class="p">.</span><span class="na">reverse</span><span class="p">(</span><span class="n">llista</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>També podem ordenar la llista en sentit invers al del <em>compareTo()</em>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">Comparator</span><span class="w"> </span><span class="n">ordreInvers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">reverseOrder</span><span class="p">();</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">llista</span><span class="p">,</span><span class="w"> </span><span class="n">ordreInvers</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>I també podem ordenar la llista en sentit invers al d'un comparador:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">ComparadorAlumnesPerNom</span><span class="w"> </span><span class="n">ordreNom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ComparadorAlumnesPerNom</span><span class="p">();</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">Comparator</span><span class="w"> </span><span class="n">ordreNomInvers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">reverseOrder</span><span class="p">(</span><span class="n">ordreNom</span><span class="p">);</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">llista</span><span class="p">,</span><span class="w"> </span><span class="n">ordreNomInvers</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="45-esquema-resum-dus-de-les-interficies-comparable-i-comparator">4.5. Esquema resum d'ús de les interfícies <em>Comparable</em> i <em>Comparator</em></h3>
<p><img alt="Esquema resum Comparable Comparator" class="center" src="../img/ud10/resumComparableComparator.png" /></p>
<p>Una volta tenim això, podrem:</p>
<ul>
<li>Comparar 2 objectes pel criteri per defecte o pel comparador que indiquem.</li>
<li>Ordenar una llista pel criteri per defecte o pel comparador que indiquem.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="p">...</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(...);</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(...);</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Alumne</span><span class="o">&gt;</span><span class="w"> </span><span class="n">alumnes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="n">alumnes</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="n">alumnes</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">a2</span><span class="p">);</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="p">...</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="n">alumnes</span><span class="p">.</span><span class="na">add</span><span class="p">(...);</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="n">CompAluEdat</span><span class="w"> </span><span class="n">caEdat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompAluEdat</span><span class="p">();</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="n">CompAluNota</span><span class="w"> </span><span class="n">caNota</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompAluNota</span><span class="p">();</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="n">CompAluNom</span><span class="w"> </span><span class="n">caNom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompAluNom</span><span class="p">();</span><span class="w"> </span><span class="c1">//(3)!</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="k">if</span><span class="p">(</span><span class="n">a1</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span><span class="w"> </span><span class="c1">//(4)!</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="k">if</span><span class="p">(</span><span class="n">caEdat</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="k">if</span><span class="p">(</span><span class="n">caNota</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="k">if</span><span class="p">(</span><span class="n">caNom</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span><span class="w"> </span><span class="c1">//(5)!</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">alumnes</span><span class="p">);</span><span class="w"> </span><span class="c1">//(6)!</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">alumnes</span><span class="p">,</span><span class="w"> </span><span class="n">caEdat</span><span class="p">);</span>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">alumnes</span><span class="p">,</span><span class="w"> </span><span class="n">caNota</span><span class="p">);</span>
<a id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">alumnes</span><span class="p">,</span><span class="w"> </span><span class="n">caNom</span><span class="p">);</span><span class="w"> </span><span class="c1">//(7)!</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Tenim 2 alumnes qualsevol que voldrem comparar.</li>
<li>Tenim una llista d'alumnes que voldrem ordenar.</li>
<li>Creem un comparador per cada criteri de comparació que necessitem.</li>
<li>Comparem 2 alumnes pel criteri per defecte.</li>
<li>Comparem 2 alumnes pel criteri que indiquem.</li>
<li>Ordenem la llista pel criteri per defecte.</li>
<li>Ordenem la llista pel criteri que indiquem.</li>
</ol>
<details class="question">
<summary>Exercici 5</summary>
<p>Volem tindre una llista de factures i poder-les ordenar per diferents criteris.</p>
<ul>
<li>
<p>Crea la class <em>Factura</em> amb els següents atributs, constructor i <em>toString</em>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Factura</span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">numero</span><span class="p">;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">importTotal</span><span class="p">;</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Cal importar <em>java.time.LocalDate</em>. No té constructor. Exemple d'ús: data = LocalDade.of(2024, 12, 31);</li>
</ol>
</li>
<li>
<p>Fes que el criteri d'ordenació per defecte siga pel número de factura. És a dir, fes que a classe <em>Factura</em> implemente la interfície <em>Comparable</em>.</p>
</li>
<li>Fes altres 2 criteris d'ordenació. És a dir, crea 2 classes que implementen la interfície <em>Comparator</em>:<ul>
<li>Per l'import i, en cas d'igualtat, pel número de la factura.</li>
<li>Per la data i, en cas d'igualtat, per l'import.</li>
</ul>
</li>
<li>Crea dos factures i mostra la major segons els 3 criteris.</li>
<li>Crea un <em>ArrayList</em> de factures, posa-li'n unes quantes i mostra la llista.</li>
<li>Ordena la llista (i mostra-la) per estos criteris:<ul>
<li>Ordre invers a l'actual.</li>
<li>Per número de factura ascendent.</li>
<li>Per número de factura descendent.</li>
<li>Per import i número de factura, ascendent.</li>
<li>Per import i número de factura, descendent.</li>
<li>Per data i import, ascendent.</li>
<li>Per data i import, descendent.</li>
</ul>
</li>
</ul>
</details>
<h2 id="5-la-interficie-cloneable">5. La interfície <em>Cloneable</em></h2>
<p>Si volem copiar un objecte a un altre hi ha diferents maneres:</p>
<h3 id="51-formes-de-copiar-objectes">5.1. Formes de copiar objectes</h3>
<h4 id="511-copia-amb-loperador">5.1.1. Còpia amb l'operador <em>=</em></h4>
<p>Recordem que amb <code>alu1 = alu2</code> no estem creant una còpia sinó que seran 2 variables que apunten al mateix objecte:</p>
<p><img alt="Copia amb =" class="center" src="../img/ud10/copiaAmbIgual.png" /></p>
<p>En compte d'això, potser volem fer una clonació: una nova zona de memòria per a alu2, on copiem el valor de cada atribut. Segons com ho fem, tindrem 2 possibilitats d'obtindre eixe clon: amb una còpia superficial o amb una còpia profunda:</p>
<h4 id="512-copia-superficial-shallow-copy">5.1.2. Còpia superficial (<em>shallow copy</em>)</h4>
<p><img alt="Shallow Copy" class="center" src="../img/ud10/shallowCopy.png" /></p>
<h4 id="513-copia-profunda-deep-copy">5.1.3. Còpia profunda (<em>deep copy</em>)</h4>
<p><img alt="Deep Copy" class="center" src="../img/ud10/deepCopy.png" /></p>
<h3 id="52-formes-de-fer-la-copia-superficial-shallow-copy">5.2. Formes de fer la còpia superficial (<em>shallow copy</em>)</h3>
<p>Veiem les diferents formes de clonar un objecte, a partir de l'exemple anterior.</p>
<p>Suposem que tenim esta classe <em>Alumne</em> (i la classe <em>PC</em>):</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kd">class</span> <span class="nc">PC</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nSerie</span><span class="p">;</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">carac</span><span class="p">;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="p">}</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">edat</span><span class="p">;</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">    </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">    </span><span class="n">PC</span><span class="w"> </span><span class="n">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PC</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Alumne</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">edat</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">edat</span><span class="p">;</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">nom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Atributs primitius</li>
<li>Atributs referenciats</li>
</ol>
<h4 id="521-clonant-amb-un-constructor">5.2.1. Clonant amb un constructor:</h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Alumne</span><span class="p">(</span><span class="n">Alumne</span><span class="w"> </span><span class="n">aluOri</span><span class="p">){</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aluOri</span><span class="p">.</span><span class="na">num</span><span class="p">;</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aluOri</span><span class="p">.</span><span class="na">edat</span><span class="p">;</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">nom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aluOri</span><span class="p">.</span><span class="na">nom</span><span class="p">;</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aluOri</span><span class="p">.</span><span class="na">notes</span><span class="p">;</span><span class="w"> </span><span class="c1">//(3)!</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aluOri</span><span class="p">.</span><span class="na">pc</span><span class="p">;</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Creem un constructor de forma que no li passem com a paràmetre els atributs, sinó tot l'objecte <em>Alumne</em> origen a copiar.</li>
<li>O bé: <em>this(aluOri.num, aluOri.edat, aluOri.nom);</em></li>
<li>Ací estem fent còpia superficial.</li>
</ol>
<p>La forma de crear el clon seria:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProvesClons</span><span class="p">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pep&quot;</span><span class="p">);</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="522-clonant-amb-un-metode-que-retorne-un-objecte-clonat">5.2.2. Clonant amb un mètode que retorne un objecte clonat:</h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="p">{</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="nf">clone</span><span class="p">(){</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">aluClonat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">num</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">edat</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">nom</span><span class="p">);</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">        </span><span class="n">aluClonat</span><span class="p">.</span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">notes</span><span class="p">;</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">        </span><span class="n">aluClonat</span><span class="p">.</span><span class="na">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">pc</span><span class="p">;</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">aluClonat</span><span class="p">;</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Creem un mètode que reserva memòria per a un nou objecte, copia component a component i retorna eixe objecte.</li>
<li>També estem fent còpia superficial.</li>
</ol>
<p>La forma de crear el clon seria:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span>
<span class="normal"><a href="#__codelineno-29-5">5</a></span>
<span class="normal"><a href="#__codelineno-29-6">6</a></span>
<span class="normal"><a href="#__codelineno-29-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProvesClons</span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pep&quot;</span><span class="p">);</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="523-invocant-el-clone-de-la-classe-object-i-implementant-la-interficie-cloneable">5.2.3. Invocant el <em>clone()</em> de la classe <em>Object</em> (i implementant la interfície <em>Cloneable</em>)</h4>
<p>És com el cas anterior (<em>Clonant amb un mètode que retorne un objecte clonat</em>) però en compte de copiar atribut a atribut, només és cridar el <em>clone()</em> d'<em>Object</em>. Però per a fer això cal implementar <em>Cloneable</em> i tractar una exempció:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cloneable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="nf">clone</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">aluClonat</span><span class="p">;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">        </span><span class="k">try</span><span class="p">{</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">            </span><span class="n">aluClonat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Alumne</span><span class="p">)</span><span class="kd">super</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">CloneNotSupportedException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;No implementa Cloneable&quot;</span><span class="p">);</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">            </span><span class="n">aluClonat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">//(3)!</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">aluClonat</span><span class="p">;</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Cal implementar <em>Cloneable</em>.</li>
<li>El <em>super.clone()</em> ens fa la còpia <strong>superficial</strong> de l'<em>Alumne</em>, sense haver de fer nosaltres la còpia atribut a atribut.</li>
<li>Cal tractar eixa excepció. Però mai es provocarà ja que hem posat <em>implements Cloneable</em>.</li>
</ol>
<p>Coses a tenir en compte per a usar el <em>clone()</em> d'<em>Object</em>:</p>
<ol>
<li><strong>Des del main no podem invocar el <em>clone()<em> d'</em>Object</em></strong>, ja que és <em>protected</em>. Per tant, caldrà invocar-lo des de la mateixa classe on volem clonar (com hem fet abans).</li>
<li>El nostre mètode que clona podria dir-se com vullgam, però <strong>s'aconsella que sobreescrivim el mètode <em>clone()<em> d'</em>Object</em></strong>. Quan sobreescrivim un mètode:<ul>
<li>Podem donar-li els mateixos permisos (<em>protected</em> en este cas) o més permisos (<em>public</em>), però no menys (<em>private</em> o "res").</li>
<li>I també podem fer que retorne un objecte d'eixa classe <em>Alumne</em>, en compte d'<em>Object</em> (com hem fet abans).</li>
</ul>
</li>
<li>Com hem vist, si volem usar el <em>super.clone()</em> cal implementar <em>Cloneable</em>. Ara bé: <strong>la interfície <em>Cloneable</em> no té cap mètode</strong>.<ul>
<li>Si no té cap mètode, per a què serveix? Només serveix per a que el programador siga conscient que amb la crida al <em>super.clone()</em> s'està fent una còpia superficial, no profunda. I que, per tant, si el programador vol fer-la profunda, caldrà clonar també els atributs referenciats que crega convenients (arrays i/o objectes dins de l'objecte).</li>
</ul>
</li>
</ol>
<h3 id="53-formes-de-fer-la-copia-profunda-deep-copy">5.3. Formes de fer la còpia profunda (<em>deep copy</em>)</h3>
<p>Depenent dels casos, a vegades caldrà fer còpia superficial, a vegades profunda i a vegades alguns atributs en superficial i altres en profunda. Veiem 2 formes de fer la <em>deep copy</em>, amb este exemple de la classe <em>Alumne</em>:</p>
<h4 id="531-deep-copy-manual">5.3.1. <em>Deep copy</em> "manual"</h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Cloneable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Alumne</span><span class="w"> </span><span class="nf">clone</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">aluClonat</span><span class="p">;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">        </span><span class="c1">// Còpia superficial:</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">            </span><span class="n">aluClonat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Alumne</span><span class="p">)</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">CloneNotSupportedException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;No implementa Cloneable&quot;</span><span class="p">);</span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">            </span><span class="n">aluClonat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="w">        </span><span class="c1">// Còpia profunda de l&#39;array &quot;notes&quot;:</span>
<a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="w">        </span><span class="n">aluClonat</span><span class="p">.</span><span class="na">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">notes</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="w">        </span><span class="c1">// Còpia profunda de l&#39;objecte &quot;pc&quot;:</span>
<a id="__codelineno-31-18" name="__codelineno-31-18"></a><span class="w">        </span><span class="n">aluClonat</span><span class="p">.</span><span class="na">pc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">pc</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span><span class="w"> </span><span class="c1">//(3)!</span>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a>
<a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="w">        </span><span class="c1">// Retornem el clon:</span>
<a id="__codelineno-31-21" name="__codelineno-31-21"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">aluClonat</span><span class="p">;</span>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-23" name="__codelineno-31-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>El <em>super.clone()</em> d'abans copia atribut a atribut.</li>
<li>Els arrays (i els <em>ArrayList</em>) tenen un mètode <em>clone()</em>.</li>
<li>Si la classe <em>PC</em> no tinguera el <em>clone()</em>, faríem: aluClonat.pc = new PC(); aluCLonat.pc.nSerie = this.pc.nSerie; aluClonat.pc.carac = this.pc.carac;</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Compte!</p>
<p><strong>El <em>clone()</em> de l'array (i el de l'<em>ArrayList</em>) és superficial</strong>. És a dir, si en compte de tindre un array d'enters tinguérem un array d'objectes, els components dels 2 arrays estarien apuntant als mateixos objectes.</p>
</div>
<h4 id="532-deep-copy-automatic">5.3.2. <em>Deep copy</em> "automàtic"</h4>
<p>Amb esta forma, "serialitzarem" l'objecte a clonar. És a dir: el convertirem a <em>bytes</em> i després tornarem a posar eixos <em>bytes</em> en l'altre objecte. Ara bé:</p>
<ul>
<li>Es farà un <em>deep copy</em> total: de tots els camps i a tots els subnivells. Si volguérem que d'algum atribut es fera còpia superficial, esta no serviria.</li>
<li>Esta forma no és molt recomanable perquè és molt més lenta que la "manual".</li>
</ul>
<p>Veiem com seria:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Alumne</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">deepClone</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">oos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">            </span><span class="n">ByteArrayOutputStream</span><span class="w"> </span><span class="n">bos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayOutputStream</span><span class="p">();</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">            </span><span class="n">oos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">bos</span><span class="p">);</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">            </span><span class="n">oos</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">            </span><span class="n">ByteArrayInputStream</span><span class="w"> </span><span class="n">bis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayInputStream</span><span class="p">(</span><span class="n">bos</span><span class="p">.</span><span class="na">toByteArray</span><span class="p">());</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">            </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ois</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">bis</span><span class="p">);</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ois</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Cal implementar la interfície <em>Serializable</em> (tampoc té cap mètode) tant en <em>Alumne</em> com en <em>PC</em>.</li>
<li>S'entendrà millor quan vejam el tema dels fitxers. De moment, només dir que amb eixe codi podríem clonar en profunditat qualsevol objecte.</li>
</ol>
<p>I clonaríem així:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span>
<span class="normal"><a href="#__codelineno-33-7">7</a></span>
<span class="normal"><a href="#__codelineno-33-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProvesClons</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pep&quot;</span><span class="p">);</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Alumne</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="na">clone</span><span class="p">();</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">        </span><span class="n">Alumne</span><span class="w"> </span><span class="n">a4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Alumne</span><span class="p">)(</span><span class="n">a1</span><span class="p">.</span><span class="na">deepClone</span><span class="p">());</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<details class="question">
<summary>Exercici 6</summary>
<p>Volem clonar cotxes en el nostre projecte.</p>
<ul>
<li>Afig a la classe <em>Cotxe</em> l'array <em>revisions</em>, de 5 booleans. Modifica el <em>toString()</em> per a que també mostre les revisions.</li>
<li>Crea el mètode <em>clone()</em> en la classe <em>Cotxe</em> per a copiar en profunditat (de forma manual).</li>
<li>En el <em>main</em> crea un <em>cotxe1</em> i clona'l a un <em>cotxe2</em>. Mostra el <em>cotxe2</em>.</li>
<li>Per vore que s'ha fet bé la <em>deep copy</em>: després de clonar, modifica una revisió del <em>cotxe1</em> i torna a mostrar el <em>cotxe2</em> per vore que no ha canviat.</li>
</ul>
</details>
<details class="question">
<summary>Exercici 7</summary>
<p>Crea la classe <em>Propietari</em> amb un <em>nom</em> i un <em>ArrayList</em> de cotxes. Fes el <em>toString()</em>.</p>
<ul>
<li>Crea el <em>clone()</em> de <em>Propietari</em> per a còpia en profunditat (de forma manual).</li>
<li>En el <em>main</em> crea l'objecte <em>propietari1</em> (amb un nom i alguns cotxes) i clona'l a un <em>propietari2</em>. Mostra les dades del <em>propietari2</em>.</li>
<li>Comprova que s'ha fet bé la còpia en profunditat: modifica el preu d'un dels cotxes del <em>propietari1</em> i mostra les dades del <em>propietari2</em>. No hauria d'haver canviat el preu d'eixe cotxe en el <em>propietari2</em>.</li>
</ul>
</details>
<h2 id="6-les-interficies-iterator-i-iterable">6. Les interfícies <em>Iterator</em> i <em>Iterable</em></h2>
<h3 id="61-introduccio">6.1. Introducció</h3>
<p>Per a recórrer una llista es pot fer de diverses maneres. Hi ha dos formes de fer-ho sense usar un comptador: amb un bucle <em>foreach</em> o amb un iterador (usant la interfície <em>Iterator</em>). Per exemple, si tenim que <em>llista</em> és un <em>ArrayList</em> de <em>strings</em>:</p>
<p><img alt="Introducció Iterator" class="center" src="../img/ud10/introduccioIterator.png" /></p>
<p>Veiem que el <em>foreach</em> és més senzill però si esborrem un element de la llista mentre la recorrem amb el <em>foreach</em> pot donar error ja que és <em>"com si ens furtaren les rajoles per on caminem"</em>. El mètode <em>remove()</em> d'<em>Iterator</em> ho resol. No el <em>remove()</em> de <em>ArrayList</em>, sinó el de la interfície <em>Iterator</em>:</p>
<p><img alt="Iterator remove" class="center" src="../img/ud10/iteratorRemove.png" /></p>
<p>Per tant, si volem esborrar algun element de la llista mentre la recorre, haurem de recórrer-la amb un iterador.</p>
<p>Veiem-ho detalladament:</p>
<h3 id="62-la-interficie-iterator">6.2. La interfície <em>Iterator</em></h3>
<p>La interfície <em>Iterator</em> proporciona uns mètodes per a accedir seqüencialment als elements d'una col·lecció:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Iterator</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">hasNext</span><span class="p">();</span><span class="w">      </span><span class="c1">// Si hi ha altre element o no a recórrer</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">    </span><span class="n">Object</span><span class="w"> </span><span class="nf">next</span><span class="p">();</span><span class="w">          </span><span class="c1">// Retorna el següent element a recórrer</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">remove</span><span class="p">();</span><span class="w">  </span><span class="c1">// Elimina l&#39;últim element obtingut amb el next()</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Com Java té moltes col·leccions distintes (<em>ArrayList</em>, <em>HashSet</em>, <em>array</em>, <em>Queue</em>...), es pretén recórrer de la mateixa forma eixes col·leccions (o altres que ens fem nosaltres).</p>
<p><strong>A. PRIMER CAL DEFINIR-NOS UN ITERADOR SOBRE LA LLISTA</strong></p>
<p>Per exemple:</p>
<p><img alt="Exemple Iterador" class="center" src="../img/ud10/exempleAIterador.png" /></p>
<p>Sintaxi:</p>
<p><img alt="Sintaxi exemple" class="center" src="../img/ud10/sintaxiAIterador.png" /></p>
<p><strong>B. RECORREM LA LLISTA AMB L'ITERADOR</strong></p>
<p><img alt="Exemple iterador" class="center" src="../img/ud10/iteradorB.png" /></p>
<p>És convenient fer ús d'eixe objecte temporal (<code>e</code>) per a no cometre este error:</p>
<p><img alt="Exemple iterador" class="center" src="../img/ud10/iteradorB2.png" /></p>
<details class="question">
<summary>Exercici 8</summary>
<p>Crea un <em>ArrayList</em> de cotxes i posa'n alguns. Després, recorre la llista de forma que, en cada cotxe, després de mostrar les dades, es preguntarà per teclat si volem esborrar eixe cotxe. En cas afirmatiu, l'esborrarem. Caldria fer-ho amb un iterador (si no, hauria de donar error).</p>
</details>
<p>Hem vist que, amb la interfície <em>Iterator</em>, podem recórrer els elements d'un <em>ArrayList</em> (o d'un <em>HashSet</em>...) ja que estes classes ens proporcionen un iterador:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">empleats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="p">();</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="p">...</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empleats</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>És a dir: la classe <em>ArrayList</em> "es pot iterar": ens proporciona un iterador. Però també voldríem fer que una classe nostra, que incloga una llista d'elements (independentment de si està implementada amb un <em>ArrayList</em>, un <em>array</em>, etc), també "puga ser iterada": que també ens proporcione un iterador. Per exemple, una classe <em>Departament</em> pot tindre dins una llista d'empleats, i voldríem fer:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="n">Departament</span><span class="w"> </span><span class="n">dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Departament</span><span class="p">();</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="p">...</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="na">iteradorEmpleats</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<p>I després treballar amb eixe <em>it</em> com ho hem fet abans (amb <em>hasNext()</em> i <em>next()</em>).</p>
<p>Per a poder fer això caldrà fer el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span>
<span class="normal"><a href="#__codelineno-37-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kd">class</span> <span class="nc">Departament</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">empleats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">iteradorEmpleats</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">empleats</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>La classe <em>Departament</em> tindrà una llista d'empleats.</li>
<li>La classe <em>Departament</em> proporcionarà l'iterador per a poder recórrer la llista dels seus empleats.</li>
</ol>
<p>Ara podem recórrer la llista dels empleats d'un departament amb eixe iterador, de la mateixa forma que abans (amb <em>hasNext()</em> i <em>next()</em>).</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span>
<span class="normal"><a href="#__codelineno-38-5">5</a></span>
<span class="normal"><a href="#__codelineno-38-6">6</a></span>
<span class="normal"><a href="#__codelineno-38-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">    </span><span class="n">Departament</span><span class="w"> </span><span class="n">dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Departament</span><span class="p">();</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">    </span><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="na">iteradorEmpleats</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()){</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">());</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>El departament ens proporciona l'iterador per a poder recórrer la llista dels seus empleats.</li>
<li>Recorrem els empleats amb els mètodes d'<em>Iterator</em>, sense saber com està implementada la llista d'empleats.</li>
</ol>
<p>Als exemples anteriors, la llista d'empleats del departament és un <em>ArrayList</em> i, per tant, el <em>Departament</em> podia proporcionar l'iterador d'eixe <em>ArrayList</em>. Però <strong>si la llista d'empleats és un <em>array</em></strong>, este no disposa d'iteradors. Per tant, l'agurem de fer nosaltres. Així:</p>
<p><img alt="Iterador d'empleats" class="center" src="../img/ud10/iteradorEmpleats.png" /></p>
<p>I ara vorem que per a recórrer els empleats del Departament implementats amb un <em>array</em> és exactament igual que recórrer els empleats implementats amb <em>ArrayList</em>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">    </span><span class="n">Departament</span><span class="w"> </span><span class="n">dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Departament</span><span class="p">();</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="na">iteradorEmpleats</span><span class="p">();</span><span class="w"> </span><span class="c1">//(1)!</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()){</span><span class="w"> </span><span class="c1">//(2)!</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">());</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Veiem altre exemple. Ara suposem que un Departament només puga tindre 3 empleats i que <strong>la llista està implementada amb 3 variables</strong>. Ara la classe que implemente l'iterador d'empleats hhaurà de ser diferent:</p>
<p><img alt="Altre iterador d'empleats" class="center" src="../img/ud10/iteradorEmpleats2.png" /></p>
<p>I, des de fora, la forma de recórrer els empleats del departament, seria exactament igual que abans: fent ús de <em>hasNext()</em>, <em>next()</em> i, si cal, <em>remove()</em>.</p>
<p>Si volguérem recórrer els empleats de la classe Departament <strong>de 2 formes distintes</strong> (ascendent i descendent, per exemple), haurem d'implementar eixos 2 criteris:</p>
<p><img alt="Doble iterador" class="center" src="../img/ud10/dobleIterador.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="n">Departament</span><span class="w"> </span><span class="n">dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Departament</span><span class="p">();</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Empleat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">it</span><span class="p">;</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">    </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="na">iteradorEmpleatsAsc</span><span class="p">();</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()){</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">());</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="na">iteradorEmpleatsDesc</span><span class="p">();</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()){</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="na">next</span><span class="p">());</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="63-la-interficie-iterable">6.3. La interfície <em>Iterable</em></h3>
<p>Als exemples anteriors hem fet que eixa classe <em>Departament</em> siga "iterable": que proporcione un iterador per a recórrer els seus elements. Però és més coherent si eixa classe <em>Departament</em> implementa la interfície <em>Iterable</em> (no s'ha de cofondre amb <em>Iterator</em>), que només té un mètode (<em>iterator()</em>) que retorna l'iterador:</p>
<p><img alt="Interfície Iterable" class="center" src="../img/ud10/iterable.png" /></p>
<p>Fent que <em>Departament</em> implemente <em>Iterable</em>, estem dient que, des de fora, podrem obtindre un iterador de la classe invocant el mètode <em>iterator()</em>, i que podrem usar els mètodes <em>hasNext()</em>, <em>next()</em> i <em>remove()</em>, sense la necessitat de saber si la llista d'empleats està implementada com un <em>ArrayList</em>, un <em>array</em> o d'alguna altra forma.</p>
<p><img alt="Departament Iterable" class="center" src="../img/ud10/departamentIterable.png" /></p>
<div class="admonition info">
<p class="admonition-title">Resumint:</p>
<p>Si volem poder recórrer els elements d'una classe, farem que eixa classe implemente la interfície <strong><em>Iterable</em></strong>. Això ens obligarà a implementar el mètode <strong><em>iterator()</em></strong>. Este retornarà l'iterador d'un <em>ArrayList</em>, etc, o bé haurem de crear una classe que implemente la interfície <em>Iterator</em>.</p>
</div>
<details class="question">
<summary>Exercici 9. Llista d'alumnes</summary>
<ul>
<li>
<p>Crea la classe <strong><em>Alumne</em></strong> amb estos atributs i mètodes:</p>
<ul>
<li>Atribut <strong><em>nom</em></strong>: nom de l'alumne.</li>
<li>Constant <strong><em>QAVA</em></strong> (quantitat avaluacions): 3</li>
<li>Constant <strong><em>QEXER</em></strong> (quantitat d'exercicis per avaluació): 5</li>
<li>Matriu <strong><em>notes</em></strong>: de <em>QAVA</em> avaluacions per <em>QEXER</em> exercicis.</li>
<li>Constructor: se li passa el nom de l'alumne i ha d'inicialitzar cada nota a <strong><em>-1</em></strong> (significa que no estan posades les notes).</li>
<li>Mètode <strong><em>posaNota</em></strong>, per a posar una nota a l'alumne (paràmetres: núm. avaluació, núm. exercici i la nota).</li>
</ul>
</li>
<li>
<p>Volem poder recórrer la matriu per avaluacions (per a treure mitjanes, màxim...). Per a això contruirem un iterador de les notes de l'alumne:</p>
<ul>
<li>Fes que la classe <strong><em>Alumne</em></strong> implemente la interfície <strong><em>Iterable</em></strong>.</li>
<li>Implementa el mètode <strong><em>iterator()</em></strong>, que retornarà un objecte iterador a partir d'una classe que t'hauràs de crear dins d'<em>Alumne</em>.</li>
<li>Crea la classe <strong><em>IteradorNotes</em></strong> que implemente <strong><em>Iterator</em></strong>. Caldrà implementar el <strong><em>hasNext()</em></strong> i <strong><em>next()</em></strong> tenint en compte que el recorregut el volem per files (avaluacions).</li>
</ul>
</li>
<li>
<p>En el <strong><em>main</em></strong> fes el següent:</p>
<ul>
<li>Crea un alumne.</li>
<li>Posa-li algunes notes.</li>
<li>Recorre les notes de l'alumne amb un iterador per a obtindre a seua nota mitja, quantes notes té aproevades i quantes suspeses. Mostra-ho per pantalla.</li>
</ul>
</li>
</ul>
</details>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Programació 1DAM/DAWsp by Abdó Garcia & Paco Galera & Joan Gerard Camarena es troba sota llicència CC BY-NC-SA 4.0 - <a href="#__consent">Canvia la configuració de les cookies</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:fj.galerataberner@edu.gva.es" target="_blank" rel="noopener" title="Contacte" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Consentiment de Cookies</h4>
<p>Utilitzem cookies per reconèixer les vostres visites i preferències repetides, així com per mesurar l'eficàcia de la nostra documentació i si els usuaris troben el que estan cercant. Amb el vostre consentiment, ens esteu ajudant a millorar la nostra documentació.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accepta</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestiona la configuració</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "content.code.annotate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>